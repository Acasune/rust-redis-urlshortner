import {
  Link,
  Table,
  TableContainer,
  Tbody,
  Td,
  Th,
  Thead,
  Tr,
} from '@chakra-ui/react'
import Head from 'next/head'
import DelUrlButton from 'container/DelUrlButton'
import PostUrlContainer from 'container/PostUrlContainer'
import { useGetAllUrls } from 'service/get-all-urls'

export default function Home() {
  const { ret, isLoading } = useGetAllUrls()
  return (
    <>
      <Head>
        <title>rust-redis-urlshortner</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
      </Head>
      <main>
        <h1>rust-redis-urlshortner</h1>
        <PostUrlContainer />

        <TableContainer>
          <Table variant="simple">
            <Thead>
              <Tr>
                <Th>Hash vals</Th>
                <Th>Raw urls</Th>
                <Th>Actions</Th>
              </Tr>
            </Thead>
            <Tbody>
              {ret.map((item, idx) => (
                <Tr key={idx}>
                  <Td>
                    <Link href={item.url} isExternal>
                      {item.hashed}
                    </Link>
                  </Td>
                  <Td>{item.url}</Td>
                  <Td>
                    <DelUrlButton hash={item.hashed} />
                  </Td>
                </Tr>
              ))}
            </Tbody>
          </Table>
        </TableContainer>
      </main>
    </>
  )
}
